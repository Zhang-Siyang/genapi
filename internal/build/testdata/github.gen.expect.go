// CODE GENERATED BY genapi. DO NOT EDIT.
package testdata

import (
	"context"
	"github.com/lexcao/genapi"
	"net/url"
)

type implGitHub struct {
	client genapi.HttpClient
}

// SetHttpClient implments genapi.Interface
func (i *implGitHub) SetHttpClient(client genapi.HttpClient) {
	i.client = client
}

func (i *implGitHub) GetUser(ctx context.Context, username string) (*User, error) {
	resp, err := i.client.Do(&genapi.Request{
		Method:     "get",
		Path:       "/users/{username}",
		PathParams: map[string]string{"username": username},
		Context:    ctx,
	})
	return genapi.HandleResponse[*User](resp, err)
}

func (i *implGitHub) ListRepositories(ctx context.Context, username string, perPage int) ([]*Repository, error) {
	resp, err := i.client.Do(&genapi.Request{
		Method:     "get",
		Path:       "/users/{username}/repos",
		PathParams: map[string]string{"username": username},
		Queries:    url.Values{"direction": []string{"desc"}, "per_page": []string{perPage}, "sort": []string{"created"}},
		Context:    ctx,
	})
	return genapi.HandleResponse[[]*Repository](resp, err)
}

func init() {
	genapi.Register[GitHub, *implGitHub]()
}
